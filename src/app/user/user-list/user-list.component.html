<div class="taskbar">
    <div class="taskbar__col">
        <button type="button" data-modal="#AddNewUser"
            class="button button--medium button--icon button--theme02 js-modal">
            <svg class="icon-simple icon-simple--theme01 icon-simple--add" aria-labelledby="title-5f86742813ab3"
                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                <path fill="none" d="M0 0h24v24H0z"></path>
                <path fill="currentColor" d="M0 10h24v4H0z"></path>
                <path fill="currentColor" d="M14 0v24h-4V0z"></path>
            </svg> &nbsp; Add New User
        </button>
    </div>
    &nbsp;&nbsp;
    <div class="taskbar__col">
        <button type="button" data-modal="#AddExistUser"
            class="button button--medium button--icon button--theme05 js-modal">
            <svg class="icon-simple icon-simple--theme01 icon-simple--add" aria-labelledby="title-5f86742813ab3"
                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                <path fill="none" d="M0 0h24v24H0z"></path>
                <path fill="currentColor" d="M0 10h24v4H0z"></path>
                <path fill="currentColor" d="M14 0v24h-4V0z"></path>
            </svg> &nbsp; Add Exist User
        </button>
    </div>
</div>


<section class="main">

    <div class="table">
        <table class="table__table">
            <thead class="table__section table__section--head">
                <tr class="table__row table__row--head">
                    <th scope="col" class="table__heading">
                        <div class="table__heading-title" [style.width.px]="170">Action</div>
                        <div class="table__heading-options">
                            <div class="icons icons--horziontal icons--size02">
                                <button class="icons__item" type="button">
                                    <div class="icons__icon">&nbsp;</div>
                                </button>
                            </div>
                        </div>
                    </th>
                    <th scope="col" class="table__heading">
                        <div class="table__heading-title" [style.width.px]="170">Name</div>
                        <div class="table__heading-options">
                            <div class="icons icons--horziontal icons--size02">
                                <button class="icons__item" type="button">
                                    <div class="icons__icon">&nbsp;</div>
                                </button>
                            </div>
                        </div>
                    </th>
                    <th scope="col" class="table__heading">
                        <div class="table__heading-title" [style.width.px]="270">Information</div>
                        <div class="table__heading-options">
                            <div class="icons icons--horziontal icons--size02">
                                <button class="icons__item" type="button">
                                    <div class="icons__icon">&nbsp;</div>
                                </button>
                            </div>
                        </div>
                    </th>
                    <th scope="col" class="table__heading">
                        <div class="table__heading-title" [style.width.px]="170">User Name</div>
                        <div class="table__heading-options">
                            <div class="icons icons--horziontal icons--size02">
                                <button class="icons__item" type="button">
                                    <div class="icons__icon">&nbsp;</div>
                                </button>
                            </div>
                        </div>
                    </th>
                    <th scope="col" class="table__heading">
                        <div class="table__heading-title" [style.width.px]="170"></div>
                        <div class="table__heading-options">
                            <div class="icons icons--horziontal icons--size02">
                                <button class="icons__item" type="button">
                                    <div class="icons__icon">&nbsp;</div>
                                </button>
                            </div>
                        </div>
                    </th>
                </tr>
            </thead>

            <tbody class="table__section table__section--body">
                <ng-container *ngIf="loadingRecords">
                    <div class="loaderCard">
                        <div class="loader"></div>
                        <h3>Please Wait...</h3>
                    </div>

                </ng-container>
                <ng-container *ngFor="let item of CurrentTenantUsers">
                    <tr class="table__row table__row--body" [ngClass]="{'table__row--is-active':item.isActive==true}">
                        <td class="table__cell" data-title="Column Title">
                            <div class="icons icons--size02">
                                <button *ngIf="!item.isTenantOwner" class="icons__item icons__item--theme03"
                                    (click)="RemoveTenantUser(item.userId)">
                                    <div class="icons__icon">
                                        <svg class="icon icon--theme01 icon-simple--trash"
                                            aria-labelledby="title-5f84133e656c0" xmlns="http://www.w3.org/2000/svg"
                                            viewBox="0 0 24 24" width="24" height="24">
                                            <path fill="none" d="M0 0h24v24H0z"></path>
                                            <path fill="currentColor"
                                                d="M18.3 18l-.4 3H6.1l-.4-3h12.6zM4.541 2.927l15.863 2.088-.391 2.975L4.15 5.9z"
                                                class="icon__color--primary">
                                            </path>
                                            <path fill="currentColor"
                                                d="M10.734 1.738l3.96.52-.26 1.98-3.96-.52zM16.3 10h3l-1 8-.4 3h-3l.4-3 1-8zM9.1 21h-3l-.4-3-1.1-8h3.1l1 8 .4 3z">
                                            </path>
                                        </svg>
                                    </div>
                                    <span class="icons__label">Remove</span>
                                </button>
                                <button *ngIf="!item.isTenantOwner" type="submit" class="button button--medium"
                                    (click)="TenantUserPermission(item)">Permision
                                </button>
                            </div>
                        </td>

                        <td class="table__cell" data-title="Column Title">
                            {{item.firstName}} {{item.lastName}}
                        </td>
                        <td class="table__cell" data-title="Column Title">
                            <span>{{item.email}}</span> <br />
                            <span>{{item.company}}</span><br />
                            <span>{{item.phoneNumber}}</span>

                        </td>
                        <td class="table__cell" data-title="Column Title">
                            {{item.userName}}
                        </td>
                        <td class="table__cell" data-title="Column Title">
                            <span *ngIf="item.isTenantOwner"> Owner</span>
                            <span *ngIf="!item.isTenantOwner"> User</span>
                        </td>

                    </tr>
                    <tr class="table__row table__row--action" [ngClass]="{'table__row--is-active':item.isActive==true}">
                        <td class="table__cell" colspan="5" *ngIf="item.isActive">
                            <div class="table__action" [ngClass]="{'exapandmenurow':item.isActive}">
                                <div class="table__button-group icons icons--size02">
                                    <div class="action action--add" [ngClass]="{'action--is-active': item.isActive}">
                                        <button
                                            class="icons__item icons__item--theme02 icons__item--clone icons__item--is-active"
                                            style="top: 0px; left: 275px;">
                                            <div class="icons__icon"><svg class="icon icon--theme01 icon--add"
                                                    aria-labelledby="title-5f83f4826a13d"
                                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48"
                                                    height="48">
                                                    <path fill="none" d="M0 0h48v48H0z"></path>
                                                    <path d="M28 36v12h-8V28a8 8 0 00-8-8 16 16 0 0116 16z"
                                                        fill="currentColor" class="icon__color--primary"></path>
                                                    <path d="M20 28H0v-8h12a8 8 0 018 8z" fill="currentColor"
                                                        class="icon__color--secondary">
                                                    </path>
                                                    <path d="M20 12V0h8v20a8 8 0 008 8 16 16 0 01-16-16z"
                                                        fill="currentColor" class="icon__color--primary">
                                                    </path>
                                                    <path d="M28 20h20v8H36a8 8 0 01-8-8z" fill="currentColor"
                                                        class="icon__color--secondary">
                                                    </path>
                                                </svg></div>
                                            <span class="icons__label">Permission</span>
                                        </button>


                                        <form class="action__wrap" #f="ngForm">
                                            <div class="form__section">
                                                <ng-container>
                                                    <div class="form__col-wrap">
                                                        <div class="form__col form__col--five"
                                                            *ngFor="let item of Permissions">
                                                            <div class="form__group form__group--checkbox">
                                                                <input id="Permission_{{item.permissionName}}"
                                                                    [(ngModel)]="item.isAssign" class="form__checkbox"
                                                                    type="checkbox"
                                                                    name="Permission_{{item.permissionName}}">
                                                                <label class="form__group-label"
                                                                    for="Permission_{{item.permissionName}}">{{item.permissionName}}</label>
                                                            </div>
                                                        </div>
                                                        <div class="form__col form__col--five"></div>
                                                        <div class="form__col form__col--five"></div>
                                                        <div class="form__col form__col--five"></div>
                                                    </div>
                                                </ng-container>
                                            </div>
                                            <div class="button-group">
                                                <button type="submit" [disabled]="!f.form.valid"
                                                    class="button button--medium" (click)="onSubmitPermission()"
                                                    href=" #">Update Permission</button>
                                                <button type="button"
                                                    class="button button--medium button--text-only js-trigger"
                                                    (click)="CloseForm(item)"
                                                    data-trigger=".table__button-group .icons__item.is-active">Cancel
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </td>

                    </tr>

                </ng-container>
            </tbody>
        </table>
    </div>


</section>


<section class="main" *ngIf="AllMemberUser!=undefined&&AllMemberUser.length>0">

    <div class="table">
        <table class="table__table">
            <thead class="table__section table__section--head">
                <tr class="table__row table__row--head">
                    <th scope="col" class="table__heading">
                        <div class="table__heading-title" [style.width.px]="170">Action</div>
                        <div class="table__heading-options">
                            <div class="icons icons--horziontal icons--size02">
                                <button class="icons__item" type="button">
                                    <div class="icons__icon">&nbsp;</div>
                                </button>
                            </div>
                        </div>
                    </th>
                    <th scope="col" class="table__heading">
                        <div class="table__heading-title" [style.width.px]="170">Name</div>
                        <div class="table__heading-options">
                            <div class="icons icons--horziontal icons--size02">
                                <button class="icons__item" type="button">
                                    <div class="icons__icon">&nbsp;</div>
                                </button>
                            </div>
                        </div>
                    </th>
                    <th scope="col" class="table__heading">
                        <div class="table__heading-title" [style.width.px]="270">Information</div>
                        <div class="table__heading-options">
                            <div class="icons icons--horziontal icons--size02">
                                <button class="icons__item" type="button">
                                    <div class="icons__icon">&nbsp;</div>
                                </button>
                            </div>
                        </div>
                    </th>
                    <th scope="col" class="table__heading">
                        <div class="table__heading-title" [style.width.px]="170">User Name</div>
                        <div class="table__heading-options">
                            <div class="icons icons--horziontal icons--size02">
                                <button class="icons__item" type="button">
                                    <div class="icons__icon">&nbsp;</div>
                                </button>
                            </div>
                        </div>
                    </th>
                </tr>
            </thead>

            <tbody class="table__section table__section--body">
                <ng-container *ngIf="loadingRecords">
                    <div class="loaderCard">
                        <div class="loader"></div>
                        <h3>Please Wait...</h3>
                    </div>

                </ng-container>
                <ng-container *ngFor="let item of AllMemberUser">
                    <tr class="table__row table__row--body" [ngClass]="{'table__row--is-active':item.isActive==true}">
                        <td class="table__cell" data-title="Column Title">
                            <div class="icons icons--size02">

                                <button type="submit" class="button button--medium"
                                    (click)="AssociateWithTenant(item.userId)">Assign
                                    to
                                    Tenant</button>
                            </div>
                        </td>
                        <td class="table__cell" data-title="Column Title">
                            {{item.firstName}} {{item.lastName}}
                        </td>
                        <td class="table__cell" data-title="Column Title">
                            <span>{{item.email}}</span> <br />
                            <span>{{item.company}}</span><br />
                            <span>{{item.phone}}</span>

                        </td>
                        <td class="table__cell" data-title="Column Title">
                            {{item.userName}}
                        </td>

                    </tr>

                </ng-container>
            </tbody>
        </table>
    </div>


</section>
<div id="AddExistUser" role="dialog" aria-labelledby="dialog-title" aria-describedby="dialog-description" tabindex="-1"
    hidden="">
    <div class="invModal__head">
        <h2 class="invModal__title">Add Exist User</h2>
        <span class="invModal__control">
            <div class="tooltip" title="Example text here"><svg
                    class="icon-simple icon-simple--theme01 icon-simple--info" aria-labelledby="title-5f9fa44f5f1a1"
                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" width="12" height="12">
                    <g data-name="Group 748" fill="currentColor">
                        <path data-name="Path 435"
                            d="M6 11.998a6 6 0 116-6 6.007 6.007 0 01-6 6zM6 .683a5.316 5.316 0 105.317 5.315A5.322 5.322 0 006 .684z">
                        </path>
                        <path data-name="Path 436"
                            d="M5.4 3.375a.573.573 0 01.15-.423.593.593 0 01.43-.147.58.58 0 01.421.147.568.568 0 01.15.423.556.556 0 01-.15.412.57.57 0 01-.421.151.583.583 0 01-.43-.151.56.56 0 01-.15-.412zm1.086 6.1H5.461V4.654h1.025z">
                        </path>
                    </g>
                </svg></div>
        </span>
    </div>
    <div class="invModal__body">
        <form class="form">
            <div class="form__section">
                <div class="form__col-wrap">
                    <div class="form__col form__col--half form__col--has-copy">
                        <label for="item-name">Search User</label>

                        <ng-autocomplete [data]="FoundUser" [searchKeyword]="keyword" (selected)='selectEvent($event)'
                            (inputChanged)='getexistingUser($event)' [debounceTime]="600" [itemTemplate]="itemTemplate"
                            [notFoundTemplate]="notFoundTemplate" disableCloseOnSelect="true">
                        </ng-autocomplete>

                        <ng-template #itemTemplate let-item>
                            <a [innerHTML]="item.userName"></a>

                        </ng-template>
                        <ng-template #notFoundTemplate let-notFound>
                            <a [innerHTML]="notFound"></a>
                        </ng-template>

                    </div>
                </div>


                <div class="form__col-wrap">
                    <div>
                        <div class="card" *ngIf="IsSelectedUser">
                            <span> {{SelectedUser.firstName}} {{SelectedUser.lastName}}</span><br />
                            <span>{{SelectedUser.userName}}</span><br />
                            <span>{{SelectedUser.email}}</span> <br />
                            <span>{{SelectedUser.company}}</span><br />
                            <span>{{SelectedUser.phone}}</span>
                        </div>

                        <div class="button-group">
                            <button type="button" class="button button--medium" *ngIf="IsSelectedUser"
                                (click)="AssociateWithTenant(SelectedUser.id)">Create
                                Member User
                            </button>
                            <button type="button" class="button button--medium button--text-only" id="CloseExistUser"
                                data-close="#AddExistUser">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<div id="AddNewUser" role="dialog" aria-labelledby="dialog-title" aria-describedby="dialog-description" tabindex="-1"
    hidden="">
    <div class="invModal__head">
        <h2 class="invModal__title">Add New User</h2>
        <span class="invModal__control">
            <div class="tooltip" title="Example text here"><svg
                    class="icon-simple icon-simple--theme01 icon-simple--info" aria-labelledby="title-5f9fa44f5f1a1"
                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" width="12" height="12">
                    <g data-name="Group 748" fill="currentColor">
                        <path data-name="Path 435"
                            d="M6 11.998a6 6 0 116-6 6.007 6.007 0 01-6 6zM6 .683a5.316 5.316 0 105.317 5.315A5.322 5.322 0 006 .684z">
                        </path>
                        <path data-name="Path 436"
                            d="M5.4 3.375a.573.573 0 01.15-.423.593.593 0 01.43-.147.58.58 0 01.421.147.568.568 0 01.15.423.556.556 0 01-.15.412.57.57 0 01-.421.151.583.583 0 01-.43-.151.56.56 0 01-.15-.412zm1.086 6.1H5.461V4.654h1.025z">
                        </path>
                    </g>
                </svg></div>
        </span>
    </div>
    <div class="invModal__body">
        <form class="form" [formGroup]="registerMemberForm" #register="ngForm" (ngSubmit)="onSubmit()">
            <div class="form__section">
                <div class="form__col-wrap">
                    <div class="form__col form__col--two"
                        [ngClass]="{ 'form__col--error': submitted && f.company.errors}">
                        <label class="form__label" for="company">Company Name <span
                                class="form__required">*</span></label>
                        <input class="form__input" type="text" pattern="^[a-zA-Z0-9&]*${1,}" id="company"
                            name="companyFormcontrol" maxlength="50" formControlName="company">
                        <ng-container *ngIf="submitted && f.company.errors"> <span *ngIf="f.company.errors.required"
                                class="form__error-message">This field is
                                required</span></ng-container>
                    </div>
                    <div class="form__col form__col--half"
                        [ngClass]="{ 'form__col--error': submitted && f.firstName.errors}">
                        <label class="form__label" for="firstName">First Name <span
                                class="form__required">*</span></label>
                        <input class="form__input" type="text" id="firstName" name="firstNameFormcontrol"
                            formControlName="firstName" pattern="[a-zA-Z]{1,}" maxlength="30" required>
                        <ng-container *ngIf="submitted && f.firstName.errors"> <span *ngIf="f.firstName.errors.required"
                                class="form__error-message">This field is
                                required</span></ng-container>
                    </div>
                    <div class="form__col form__col--half"
                        [ngClass]="{ 'form__col--error': submitted && f.lastName.errors}">
                        <label class="form__label" for="lastName">Last Name <span
                                class="form__required">*</span></label>
                        <input class="form__input" type="text" id="lastName" name="lastNameFormcontrol"
                            pattern="[a-zA-Z]{1,}" maxlength="30" formControlName="lastName">
                        <ng-container *ngIf="submitted && f.lastName.errors.required"> <span
                                *ngIf="f.lastName.errors.required" class="form__error-message">This field is
                                required</span>
                            <span *ngIf="f.lastName.errors.pattern" class="form__error-message">match the
                                required</span>
                        </ng-container>

                    </div>
                    <div class="form__col form__col--two"
                        [ngClass]="{ 'form__col--error': submitted && f.email.errors}">
                        <label class="form__label" for="emailFormcontrol">Email or Username <span
                                class="form__required">*</span></label>
                        <input class="form__input" type="email" autocomplete="off" id="emailFormcontrol"
                            name="emailFormcontrol" formControlName="email">
                        <ng-container *ngIf="submitted && f.email.errors">
                            <span *ngIf="f.email.errors.required" class="form__error-message">This field is
                                required</span>
                            <span *ngIf="f.email.errors.pattern" class="form__error-message">Email must be a valid
                                email address</span>
                        </ng-container>


                    </div>

                    <div class="form__col form__col--two"
                        [ngClass]="{ 'form__col--error': submitted && f.password.errors}">
                        <label class="form__label" for="password">Password <span class="form__required">*</span></label>
                        <input *ngIf="!showPassword" class="form__input" type="password" id="password"
                            name="passwordFormcontrol" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                            formControlName="password">
                        <input *ngIf="showPassword" class="form__input" type="text" id="password"
                            name="passwordFormcontrol" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                            formControlName="password">
                        <i *ngIf="!showPassword" id="togglePassword" (click)="showPasswords()"><svg
                                class="icon-simple icon-simple--theme01 icon-simple--show"
                                aria-labelledby="title-5fd0b5a288597" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24" width="18" height="18">
                                <path fill="none" d="M0 0h24v24H0z"></path>
                                <path
                                    d="M21 8.1a11.9 11.9 0 00-18 0A10.9 10.9 0 00.7 12 10.9 10.9 0 003 15.9a11.9 11.9 0 0018 0 10.9 10.9 0 002.3-3.9A10.9 10.9 0 0021 8.1zM12 17a9.1 9.1 0 01-8.1-5 9.1 9.1 0 0116.2 0 9.1 9.1 0 01-8.1 5z"
                                    fill="currentColor"></path>
                                <circle cx="12" cy="12" r="3.5" fill="currentColor"></circle>
                            </svg></i>
                        <i *ngIf="showPassword" id="togglePassword" (click)="showPasswords()"><svg
                                class="icon-simple icon-simple--theme01 icon-simple--hide"
                                aria-labelledby="title-5fd1bb780d44b" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24" width="18" height="18">
                                <path fill="none" d="M0 0h24v24H0z"></path>
                                <path
                                    d="M21.1 8.1a6.8 6.8 0 00-1.2-1.2L22.8 4H20L4 20h2.8l.9-.9a11.2 11.2 0 004.4.9 11.9 11.9 0 009-4.1 10.9 10.9 0 002.3-3.9 10.9 10.9 0 00-2.3-3.9zm-9 8.9a6.4 6.4 0 01-2-.3l1.3-1.3h.7a3.5 3.5 0 003.5-3.4v-.7L17.8 9a8.9 8.9 0 012.4 3 8.9 8.9 0 01-8.1 5zm-5.8-2.1A8.9 8.9 0 014.1 12a8.8 8.8 0 018-5l1.9.2 2.4-2.4a12.2 12.2 0 00-4.3-.8 11.9 11.9 0 00-9 4.1A10.9 10.9 0 00.8 12a10.9 10.9 0 002.3 3.9L4.2 17z"
                                    fill="currentColor"></path>
                                <path d="M8.6 12c0 .2.1.3.1.5l3.9-4h-.5A3.5 3.5 0 008.6 12z" fill="currentColor"></path>
                            </svg></i>
                        <ng-container *ngIf="submitted && f.password.errors"> <span *ngIf="f.password.errors.required"
                                class="form__error-message">This field is
                                required</span></ng-container>
                    </div>
                    <div class="form__col form__col--two"
                        [ngClass]="{ 'form__col--error': submitted && f.phone.errors}">
                        <label class="form__label" for="phone">Phone Number <span
                                class="form__required">*</span></label>
                        <input class="form__input" type="text" id="phone" name="phoneFormcontrol"
                            formControlName="phone" pattern="^\+(?:[0-9]â—?){6,14}[0-9]" maxlength="15">
                        <ng-container *ngIf="submitted && f.phone.errors"> <span *ngIf="f.phone.errors.required"
                                class="form__error-message">This field is
                                required</span></ng-container>
                    </div>
                    <div class="form__col-wrap">
                        <div class="button-group">
                            <button type="submit" class="button button--medium">Register</button>
                            <button type="button" class="button button--medium button--text-only" (click)="onReset()"
                                id="Closebtn" data-close="#AddNewUser">Cancel
                            </button>
                        </div>
                    </div>

                </div>
            </div>
        </form>
    </div>
</div>